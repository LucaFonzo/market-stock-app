<main class="container">
  <section class="search-container">
    <div>
      <mat-autocomplete #auto="matAutocomplete">
        @for (stock of searchs; track stock) {
        <mat-option [value]="" (onSelectionChange)="updateInfo(stock)">{{stock.name}}</mat-option>
        }
      </mat-autocomplete>
    </div>
    <div>
      <input type="text" placeholder="Search one..." aria-label="Number" matInput [matAutocomplete]="auto"
        (keyup)="search()" [(ngModel)]="name">
    </div>
    <div class="info-stock">
      <mat-card-header class="card-header">
        <mat-card-title>
          {{stock?.name}}
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Price: {{stock?.price}}</p>
        <p>changesPercentage: %{{stock?.changesPercentage}}</p>
        <p>Change: {{stock?.change}}</p>
        <p>Day Low: {{stock?.dayLow}}</p>
        <p>Day High: {{stock?.dayHigh}}</p>
        <p>Market cap: {{stock?.marketCap}}</p>
        <p>Open: {{stock?.open}}</p>
        <p>Volume: {{stock?.volume}}</p>
        <p>Avg volume: {{stock?.avgVolume}}</p>
      </mat-card-content>
    </div>
  </section>
  <div>
    <section class="stock-list">
      <div>
        <div>
          <h2>Prices</h2>
        </div>
        <div>
          <mat-form-field>
            <mat-label>Select an option</mat-label>
            <mat-select [(value)]="filter" (selectionChange)="updateList()">
              <mat-option></mat-option>
              <mat-option value="gainers">Biggest Gaingers</mat-option>
              <mat-option value="losers">Biggest Losers</mat-option>
              <mat-option value="actives">Most Actives</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <table mat-table [dataSource]="stocks">
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef> Price </th>
          <td mat-cell *matCellDef="let element">{{currency}}{{element.price}} </td>
        </ng-container>

        <!-- Change Column -->
        <ng-container matColumnDef="change">
          <th mat-header-cell *matHeaderCellDef> Change </th>
          <td mat-cell *matCellDef="let element">{{currency}}{{element.change}} </td>
        </ng-container>

        <!-- Change Percentage Column -->
        <ng-container matColumnDef="%">
          <th mat-header-cell *matHeaderCellDef> % </th>
          <td mat-cell *matCellDef="let element"> %{{element.changesPercentage}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
      </table>
    </section>
  </div>

</main>